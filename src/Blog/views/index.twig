{% extends 'layout.twig' %}

{% block title "Mes articles" %}

{% block body %}
  <div class="row">
    {% if category %}
      <h1>Cat√©gorie : {{ category.name }}</h1>
    {% else %}
      <h1>Tous les articles</h1>
    {% endif %}
  </div>
  <div class="row" style="margin-top: 20px;">
    <div class="col-md-9">
      {% for row in posts | batch(3) %}
        <div class="card-deck" style="margin-top: 10px;">
          {% for post in row %}
            <div class="card">
              <div class="card-header">
                <h4><a href="{{ path('blog.show', {slug: post.slug, id: post.id}) }}">{{ post.name }}</a></h4>
                {% if post.category_name %}
                    <p class="text-muted" style="margin-bottom: 0;">{{ post.category_name  }}</p>
                {% endif %}
              </div>
              <div class="card-block" style="height: 120px; padding: 0.5vw;">
                <p class="card-text">
                    {{ post.content | nl2br | excerpt }}
                </p>
                <p class="text-muted">{{ post.created_at | ago }}</p>
              </div>
              <div class="card-footer" style="position: relative; bottom: 0;">
                <a href="{{ path('blog.show', {slug: post.slug, id: post.id}) }}" class="btn btn-primary">Voir l'article</a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
      <div class="row" style="margin-top: 1vw;">
        <div class="mx-auto">
          {% if category %}
            {{ paginate(posts, 'blog.category', {slug: category.slug}) }}
          {% else %}
            {{ paginate(posts, 'blog.index') }}
          {% endif %}
        </div>
      </div>
    </div>
    <div class="col-md-3">
        <ul class="list-group">
          <li class="list-group-item">
            <a href="{{  path('blog.index') }}">Tous les articles</a>
          </li>
          {% for c in categories %}
            <li class="list-group-item {% if c.id == category.id %}active{% endif %}">
              <a href="{{  path('blog.category', {slug: c.slug}) }}" style="color: inherit;">{{ c.name }}</a>
            </li>
          {% endfor %}
        </ul>
    </div>
  </div>
{% endblock body %}
